# SMTP Клиент

## Работу выполнил:

> Березин Михаил, кн-203 (мен-210203)

## Постановка задачи:

```
Реализовать SMTP-клиента. На вход подается конфигурационный файл, 
файл с паролем и файл с сообщением. В конфигурационном файле указано
от кого отправить письмо, кому (несколько пользователей), тема письма
и директория с файлами для отправки.
```

## О программе:

#### Запуск программы

> main.py [-h] --config CONFIG --password PASSWORD --msg MSG

#### Структура файлов на вход:

```
PASSWORD - файл txt с паролем для работы с SMTP
```

```
MSG - файл txt с текстом для письма
```

```
CONFIG - json-файл со следующей структурой:
```

###### from - строка с адресом отправителя

###### to - список строк адресов получателя

###### subject - строка с темой письма

###### path_directory_files - строка с путем до директории с файлами для отправки

## Реализация:

#### Класс SMTPClient

```
Классу SMTPClient на вход передается словарь с конфигом
и путями до файлов с паролем и сообщением для отправки.
Эти все данные извлекаются

устанавливается адрес сервера SMTP - "smtp.yandex.ru"
устанавливается smtp порт - 465
```

#### Функция send_message

```
переводится в base64 логин и пароль отправителя
создается сокет и конектится к серверу
обертывается в SSL

Принимаем привественное сообщение от сервера и
начинаем ему отправлять команды ehlo AUTH LOGIN
затем начинаем отправку пользователям из списка
используя команды MAIL FROM,RCPT TO, DATA
```

#### Функция prepare_files

```
Функция подготовки файлов к отправке

Функция составляет словарь для файлов, которые нужно отправить.
Находится имя файла, закодированное в base64 байтовое представление 
файла и тип файла для Content-type.

```

#### Функция message_prepare

```
Функция подготовки сообщения к отправке. Заполняются заголовки,
тело письма, прикрепляются файлы-вложения и возвращается 
готовое к отправке сообщение.
```

## Скриншоты работы

![Снимок экрана 2023-05-24 123504](https://github.com/TheMLord/smtp_client/assets/113773994/1e29ab82-b10a-4821-bc0e-11e9927518aa)
![Снимок экрана 2023-05-24 123639](https://github.com/TheMLord/smtp_client/assets/113773994/58aa5b51-6bfb-4b83-a7a0-bda7572bf528)
![Снимок экрана 2023-05-24 123559](https://github.com/TheMLord/smtp_client/assets/113773994/385384f3-94b0-4976-b185-8493ff40010f)
![Снимок экрана 2023-05-24 123530](https://github.com/TheMLord/smtp_client/assets/113773994/c36c3f2a-71b3-4f62-9bfb-81837bb5ff32)
![Снимок экрана 2023-05-24 123546](https://github.com/TheMLord/smtp_client/assets/113773994/1bce932b-41ae-4355-ad3c-1f468948e63d)


